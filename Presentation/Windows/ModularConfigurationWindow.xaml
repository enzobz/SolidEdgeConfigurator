<Window x:Class="SolidEdgeConfigurator.Presentation.Windows.ModularConfigurationWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Modular Configuration" Height="800" Width="1200"
        Background="#F5F5F5"
        WindowStartupLocation="CenterOwner">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="60"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="40"/>
            <RowDefinition Height="60"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Grid Grid.Row="0" Background="#4CAF50">
            <StackPanel VerticalAlignment="Center" Margin="20,0">
                <TextBlock Text="Modular Switchboard Configurator" Foreground="White" FontSize="20" FontWeight="Bold"/>
                <TextBlock Text="Select options from each category to build your configuration" Foreground="WhiteSmoke" FontSize="12" Margin="0,5,0,0"/>
            </StackPanel>
        </Grid>

        <!-- Main Content -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="3*"/>
            </Grid.ColumnDefinitions>

            <!-- Left Panel: Options Selection -->
            <Border Grid.Column="0" Background="White" Margin="10" CornerRadius="5" BorderBrush="#DDD" BorderThickness="1">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Selection Header -->
                    <Border Grid.Row="0" Background="#E8F5E9" Padding="15">
                        <TextBlock Text="Configuration Options" FontSize="16" FontWeight="Bold" Foreground="#2E7D32"/>
                    </Border>

                    <!-- Categories Panel -->
                    <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Padding="15">
                        <StackPanel x:Name="CategoriesPanel">
                            <!-- Categories will be loaded dynamically -->
                        </StackPanel>
                    </ScrollViewer>

                    <!-- Summary Panel -->
                    <Border Grid.Row="2" Background="#E3F2FD" Padding="15" BorderThickness="0,1,0,0" BorderBrush="#DDD">
                        <StackPanel>
                            <TextBlock Text="Current Selection:" FontWeight="Bold" Margin="0,0,0,10"/>
                            <ScrollViewer MaxHeight="120" VerticalScrollBarVisibility="Auto">
                                <TextBlock x:Name="SummaryText" Text="No options selected" Foreground="#666" TextWrapping="Wrap"/>
                            </ScrollViewer>
                        </StackPanel>
                    </Border>
                </Grid>
            </Border>

            <!-- Right Panel: BOM Display -->
            <Border Grid.Column="1" Background="White" Margin="10" CornerRadius="5" BorderBrush="#DDD" BorderThickness="1">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- BOM Header -->
                    <Border Grid.Row="0" Background="#FFF3E0" Padding="15">
                        <TextBlock Text="Bill of Materials (BOM)" FontSize="16" FontWeight="Bold" Foreground="#E65100"/>
                    </Border>

                    <!-- Modules Info -->
                    <Border Grid.Row="1" Background="#F5F5F5" Padding="10" BorderThickness="0,1,0,1" BorderBrush="#DDD">
                        <ScrollViewer MaxHeight="100" VerticalScrollBarVisibility="Auto">
                            <TextBlock x:Name="ModulesText" Text="Generate BOM to see activated modules" Foreground="#666" TextWrapping="Wrap" FontSize="11"/>
                        </ScrollViewer>
                    </Border>

                    <!-- BOM DataGrid -->
                    <DataGrid Grid.Row="2" x:Name="BOMDataGrid" 
                              AutoGenerateColumns="False" 
                              IsReadOnly="True"
                              AlternatingRowBackground="#F9F9F9"
                              GridLinesVisibility="Horizontal"
                              HeadersVisibility="Column"
                              CanUserResizeColumns="True"
                              CanUserSortColumns="True"
                              Margin="0">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Part Code" Binding="{Binding PartCode}" Width="100"/>
                            <DataGridTextColumn Header="Part Name" Binding="{Binding PartName}" Width="150"/>
                            <DataGridTextColumn Header="Part Number" Binding="{Binding PartNumber}" Width="120"/>
                            <DataGridTextColumn Header="Description" Binding="{Binding Description}" Width="*"/>
                            <DataGridTextColumn Header="Qty" Binding="{Binding TotalQuantity}" Width="50"/>
                            <DataGridTextColumn Header="Unit" Binding="{Binding Unit}" Width="50"/>
                            <DataGridTextColumn Header="Unit Price" Binding="{Binding UnitPrice, StringFormat=C}" Width="90"/>
                            <DataGridTextColumn Header="Total Price" Binding="{Binding TotalPrice, StringFormat=C}" Width="90"/>
                            <DataGridTextColumn Header="Supplier" Binding="{Binding Supplier}" Width="100"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </Border>
        </Grid>

        <!-- Status Bar -->
        <Border Grid.Row="2" Background="#FAFAFA" BorderThickness="0,1,0,0" BorderBrush="#DDD">
            <TextBlock x:Name="StatusText" Text="Ready" Margin="15,0" VerticalAlignment="Center" Foreground="#666" FontSize="11"/>
        </Border>

        <!-- Action Buttons -->
        <Grid Grid.Row="3" Background="#FAFAFA">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="20,0">
                <Button Content="Generate BOM" Click="GenerateBOM_Click" 
                        Background="#4CAF50" Foreground="White" 
                        Padding="20,10" Margin="0,0,10,0" 
                        FontWeight="Bold" Width="150" Height="40"/>
                <Button Content="Export BOM" Click="ExportBOM_Click" 
                        Background="#2196F3" Foreground="White" 
                        Padding="20,10" Margin="0,0,10,0" 
                        FontWeight="Bold" Width="120" Height="40"/>
                <Button Content="Close" Click="Close_Click" 
                        Background="#CCCCCC" Foreground="Black" 
                        Padding="20,10" FontWeight="Bold" 
                        Width="100" Height="40"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>
